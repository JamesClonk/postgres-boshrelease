---
name: postgres
packages:
  - postgres
templates:
  bin/ctl: bin/ctl
  bin/monit_debugger: bin/monit_debugger
  data/properties.sh.erb: data/properties.sh
  helpers/ctl_setup.sh: helpers/ctl_setup.sh
  helpers/ctl_utils.sh: helpers/ctl_utils.sh

  config/postgresql.conf: config/postgresql.conf
  config/hba.conf:        config/hba.conf
  config/ident.conf:      config/ident.conf

  sql/setup-replication.sql: sql/setup-replication.sql

properties:
  postgres.config:
    description: A map of postgresql.conf configuration directives, keyed by name.
    default: {}

  postgres.hba:
    description: A list of pg_hba.conf configuration acls.  See Section 19.1 of the PostgreSQL manual.
    default: []

  postgres.ident:
    description: A list of pg_ident.conf configuration entries  See Section 19.2 of the PostgreSQL manual.
    default: []

  postgres.replication.enabled:
    description: Whether or not to enable streaming PostgreSQL replication
    default: false
  postgres.replication.master:
    description: IP address of the preferred master node
    default: ~
  postgres.replication.pool:
    description: List of all IP address of nodes in the replication pool (including the master)
    default: []
